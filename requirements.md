# 要件定義書

## 文書情報
- **文書名**: 要件定義書
- **バージョン**: 1.0
- **作成日**: 2024-05-03
- **作成者**: Requirements Agent
- **対象システム**: TypeScript Gomoku Game

## プロジェクト概要

### プロジェクト名
typescript-gomoku-game

### 概要
TypeScriptを用いた五目並べ（Gomoku）ゲームの実装

### 背景・目的
プログラミングの学習とゲーム開発の実践のため、シンプルながら戦略的な五目並べゲームを実装する

### スコープ
ブラウザ上で動作する五目並べゲームの開発

### アウトオブスコープ
AI対戦機能、オンライン対戦機能、ゲームの保存と再開機能

## ステークホルダー

| ロール | 担当者名 | 責務 |
|-------|---------|------|
| 開発者 | 開発チーム | ゲームの設計、実装、テスト |
| ユーザー | ゲームプレイヤー | ゲームのプレイ、フィードバック提供 |

## 業務要件

### BR-001: 五目並べゲームの提供
- **詳細**: ユーザーがブラウザ上で五目並べゲームをプレイできること
- **優先度**: 高
- **要求元**: プロジェクト要求

### BR-002: 二人対戦の実現
- **詳細**: 同一デバイス上で二人のプレイヤーが交互に手を打ち対戦できること
- **優先度**: 高
- **要求元**: プロジェクト要求

### BR-003: 標準ルールの適用
- **詳細**: 五目並べの標準的なルールに基づいてゲームが進行すること
- **優先度**: 高
- **要求元**: プロジェクト要求

## 機能要件

### FR-001: ゲームボード表示
- **詳細**: 19x19のマス目からなる五目並べボードを表示する
- **関連業務要件**: BR-001
- **受け入れ条件**:
  - ボードは19x19のグリッドとして表示される
  - 各交点が明確に識別できる
  - 画面サイズに応じて適切にレスポンシブ対応する

### FR-002: 石の配置
- **詳細**: プレイヤーがクリックした交点に自分の石（黒または白）を配置できる
- **関連業務要件**: BR-002
- **受け入れ条件**:
  - 空いている交点のみに石を置ける
  - すでに石がある場所には置けない
  - 石を置いた後、ターンが自動的に切り替わる

### FR-003: ターン表示
- **詳細**: 現在どちらのプレイヤーのターンかを表示する
- **関連業務要件**: BR-002
- **受け入れ条件**:
  - 黒番（先手）と白番（後手）が視覚的に区別できる
  - ターンが切り替わるたびに表示が更新される

### FR-004: 勝敗判定
- **詳細**: いずれかのプレイヤーが5つ連続で石を並べた時点で勝者を判定する
- **関連業務要件**: BR-003
- **受け入れ条件**:
  - 横、縦、斜めいずれかの方向に5つ連続で同じ色の石が並んだ場合に勝利判定
  - 勝者が決まった場合、勝者を表示する
  - すべての交点が埋まった場合は引き分けとする

### FR-005: ゲームリセット
- **詳細**: ゲーム終了後、新しいゲームを開始できる
- **関連業務要件**: BR-001
- **受け入れ条件**:
  - リセットボタンによりボードを初期状態に戻せる
  - 新しいゲームでは黒が先手となる

## ユースケース

### UC-001: ゲーム開始
- **概要**: ユーザーがゲームを開始する
- **アクター**: プレイヤー
- **事前条件**: 
  - ゲームページにアクセスしている
- **手順**:
  1. ゲームページにアクセスする
  2. 空の19x19ボードが表示される
  3. 黒番（先手）のプレイヤーから開始する
- **事後条件**: 
  - ゲームが開始状態になっている
- **例外**:
  - **条件**: ブラウザ非対応
  - **動作**: 対応ブラウザを使用するよう促す

### UC-002: 石を置く
- **概要**: プレイヤーが交点に石を置く
- **アクター**: 現在のターンのプレイヤー
- **事前条件**:
  - ゲームが開始されている
  - 決着がついていない
- **手順**:
  1. プレイヤーは空いている交点をクリックする
  2. クリックした交点に自分の色の石が置かれる
  3. 勝敗またはゲーム終了の条件を満たしていないか確認する
  4. ターンが相手プレイヤーに切り替わる
- **事後条件**:
  - 石が配置され、ターンが切り替わる
- **例外**:
  - **条件**: すでに石がある交点をクリック
  - **動作**: 何も起こらず、同じプレイヤーのターンが継続

### UC-003: ゲーム終了
- **概要**: いずれかのプレイヤーが勝利条件を達成するか、引き分けとなる
- **アクター**: プレイヤー
- **事前条件**:
  - ゲームが進行中
- **手順**:
  1. プレイヤーが石を置く
  2. システムが勝敗条件（5つ連続で石が並ぶ）を確認
  3. 勝利条件を満たした場合、勝者を表示
  4. すべての交点が埋まった場合、引き分けを表示
- **事後条件**:
  - ゲームの結果が表示され、リセットが可能な状態になる

### UC-004: ゲームリセット
- **概要**: 新しいゲームを開始する
- **アクター**: プレイヤー
- **事前条件**:
  - ゲームが終了している、またはリセットを希望している
- **手順**:
  1. リセットボタンをクリック
  2. ボードが初期化される
  3. 黒番（先手）から新しいゲームが開始される
- **事後条件**:
  - 新しいゲームが開始状態になる

## 非機能要件

### 性能要件
- **要件**: ユーザー操作（石を置く）から表示更新までの遅延は100ms未満
- **測定方法**: 開発環境での計測

- **要件**: すべてのデバイスでスムーズな描画を実現（60FPS以上）
- **測定方法**: ブラウザの開発者ツールによる計測

### セキュリティ要件
- **要件**: プレイヤーのゲームデータはローカルのみで処理され、外部に送信されない
- **測定方法**: コードレビューによる確認

### 拡張性要件
- **要件**: PC、タブレット、スマートフォンなど様々な画面サイズに対応
- **測定方法**: 異なるデバイスでのテスト

### 使用性要件
- **要件**: 初めてのユーザーでも直感的に操作できる
- **測定方法**: ユーザーテスト

- **要件**: WCAG 2.1のレベルAに準拠
- **測定方法**: アクセシビリティチェックツールによる評価

## 制約条件

### 技術的制約
- TypeScriptを使用して実装
- モダンなWebブラウザ（Chrome、Firefox、Safari、Edgeの最新版）で動作すること

### 業務制約
- オープンソースとして公開する場合はMITライセンスを適用すること

## 前提条件
- ユーザーは基本的な五目並べのルールを理解している
- 最新のWebブラウザを使用している

## リスク

### R-001: 複雑な勝敗判定ロジックでバグが発生する可能性
- **影響度**: 中
- **発生確率**: 中
- **対策**: 包括的なテストケースの作成と詳細なコードレビュー

### R-002: 異なるデバイスでのレイアウト崩れ
- **影響度**: 中
- **発生確率**: 高
- **対策**: レスポンシブデザインの適用とクロスデバイステスト

## 完了の定義
- すべての機能要件が実装され、受け入れ条件を満たしている
- UIがレスポンシブであり、主要なデバイスとブラウザで正常に動作する
- コードレビューが完了している
- 基本的なユーザーテストが完了し、重大なバグが修正されている

## 承認
- **承認者からのコメント**: 
- **承認者**: 
- **承認日**: 